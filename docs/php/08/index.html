<!doctype html><html lang=de class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Skriptum zur Lehrveranstaltung Serverseitige Softwareentwicklung"><meta name=author content="Stefan Huber"><link rel="shortcut icon" href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1, mkdocs-material-5.1.1"><title>Datenbanken - Serverseitige Softwareentwicklung</title><link rel=stylesheet href=../../assets/stylesheets/main.a676eddb.min.css><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style></head> <body dir> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#arbeiten-mit-datenbanken class=md-skip> Zum Inhalt </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label> <a href=../.. title="Serverseitige Softwareentwicklung" class="md-header-nav__button md-logo" aria-label="Serverseitige Softwareentwicklung"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z /></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Serverseitige Softwareentwicklung </span> <span class="md-header-nav__topic md-ellipsis"> Datenbanken </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Suche placeholder=Suche autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z /></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Suchbegriff eingeben </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/stefanhuber/Serverseitige-Softwareentwicklung/ title=Quellcode class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../01/ class="md-tabs__link md-tabs__link--active"> PHP </a> </li> <li class=md-tabs__item> <a href=../../regex/einf%C3%BChrung/ class=md-tabs__link> Regex </a> </li> <li class=md-tabs__item> <a href=../../webserver/einf%C3%BChrung/ class=md-tabs__link> Web-Server </a> </li> <li class=md-tabs__item> <a href=../../tutorials/01/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../exercises/01/ class=md-tabs__link> Übungstutorials </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Serverseitige Softwareentwicklung" class="md-nav__button md-logo" aria-label="Serverseitige Softwareentwicklung"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"/></svg> </a> Serverseitige Softwareentwicklung </label> <div class=md-nav__source> <a href=https://github.com/stefanhuber/Serverseitige-Softwareentwicklung/ title=Quellcode class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> PHP <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=PHP data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> PHP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01/ title=Grundlagen class=md-nav__link> Grundlagen </a> </li> <li class=md-nav__item> <a href=../02/ title=Arrays class=md-nav__link> Arrays </a> </li> <li class=md-nav__item> <a href=../03/ title=Superglobals class=md-nav__link> Superglobals </a> </li> <li class=md-nav__item> <a href=../04/ title=Funktionen class=md-nav__link> Funktionen </a> </li> <li class=md-nav__item> <a href=../05/ title=OOP class=md-nav__link> OOP </a> </li> <li class=md-nav__item> <a href=../06/ title="Sessions und Cookies" class=md-nav__link> Sessions und Cookies </a> </li> <li class=md-nav__item> <a href=../07/ title="Errors und Exceptions" class=md-nav__link> Errors und Exceptions </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Datenbanken <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z /></svg> </span> </label> <a href=./ title=Datenbanken class="md-nav__link md-nav__link--active"> Datenbanken </a> <nav class="md-nav md-nav--secondary" aria-label=Inhaltsverzeichnis> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Inhaltsverzeichnis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#verbindung-mit-dsn class=md-nav__link> Verbindung mit DSN </a> </li> <li class=md-nav__item> <a href=#exec-und-query class=md-nav__link> Exec und Query </a> </li> <li class=md-nav__item> <a href=#prepared-statements class=md-nav__link> Prepared Statements </a> </li> <li class=md-nav__item> <a href=#insert-statement class=md-nav__link> INSERT Statement </a> </li> <li class=md-nav__item> <a href=#update-statement class=md-nav__link> UPDATE Statement </a> </li> <li class=md-nav__item> <a href=#delete-statement class=md-nav__link> DELETE Statement </a> </li> <li class=md-nav__item> <a href=#create-statement class=md-nav__link> CREATE Statement </a> </li> <li class=md-nav__item> <a href=#details-zu-fetch class=md-nav__link> Details zu Fetch </a> <nav class=md-nav aria-label="Details zu Fetch"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zeilenweises-auslesen class=md-nav__link> Zeilenweises Auslesen </a> </li> <li class=md-nav__item> <a href=#fetch-ergebniszeile class=md-nav__link> Fetch Ergebniszeile </a> </li> <li class=md-nav__item> <a href=#beispiel-fetchobject class=md-nav__link> Beispiel fetchObject </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#weitere-ressourcen class=md-nav__link> Weitere Ressourcen </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../09/ title="Quellcode einbinden" class=md-nav__link> Quellcode einbinden </a> </li> <li class=md-nav__item> <a href=../10/ title="Arbeiten mit Projektabhängigkeiten" class=md-nav__link> Arbeiten mit Projektabhängigkeiten </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Regex <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Regex data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Regex </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../regex/einf%C3%BChrung/ title=Einführung class=md-nav__link> Einführung </a> </li> <li class=md-nav__item> <a href=../../regex/zeichenklassen/ title=Zeichenklassen class=md-nav__link> Zeichenklassen </a> </li> <li class=md-nav__item> <a href=../../regex/wiederholungen/ title=Wiederholungen class=md-nav__link> Wiederholungen </a> </li> <li class=md-nav__item> <a href=../../regex/gruppierungen/ title=Gruppierungen class=md-nav__link> Gruppierungen </a> </li> <li class=md-nav__item> <a href=../../regex/alternative/ title=Alternative class=md-nav__link> Alternative </a> </li> <li class=md-nav__item> <a href=../../regex/anker-und-wortgrenzen/ title="Anker und Wortgrenzen" class=md-nav__link> Anker und Wortgrenzen </a> </li> <li class=md-nav__item> <a href=../../regex/modifikationen/ title=Modifikationen class=md-nav__link> Modifikationen </a> </li> <li class=md-nav__item> <a href=../../regex/beispiele/ title=Beispiele class=md-nav__link> Beispiele </a> </li> <li class=md-nav__item> <a href=../../regex/nutzung-mit-php/ title="Nutzung mit PHP" class=md-nav__link> Nutzung mit PHP </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Web-Server <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Web-Server data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Web-Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../webserver/einf%C3%BChrung/ title=Einführung class=md-nav__link> Einführung </a> </li> <li class=md-nav__item> <a href=../../webserver/funktionen/ title="Wichtige Funktionen" class=md-nav__link> Wichtige Funktionen </a> </li> <li class=md-nav__item> <a href=../../webserver/nginx-nutzung/ title="Nginx Nutzung" class=md-nav__link> Nginx Nutzung </a> </li> <li class=md-nav__item> <a href=../../webserver/nginx-konfiguration/ title="Nginx Konfiguration" class=md-nav__link> Nginx Konfiguration </a> </li> <li class=md-nav__item> <a href=../../webserver/websockets/ title=WebSockets class=md-nav__link> WebSockets </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Tutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/01/ title="PHP Installation" class=md-nav__link> PHP Installation </a> </li> <li class=md-nav__item> <a href=../../tutorials/02/ title="PHP Webserver" class=md-nav__link> PHP Webserver </a> </li> <li class=md-nav__item> <a href=../../tutorials/03/ title="PHP Konfiguration" class=md-nav__link> PHP Konfiguration </a> </li> <li class=md-nav__item> <a href=../../tutorials/04/ title="Arbeiten mit SQLite" class=md-nav__link> Arbeiten mit SQLite </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Übungstutorials <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z /></svg> </span> </label> <nav class=md-nav aria-label=Übungstutorials data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Übungstutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../exercises/01/ title="Übungsblatt 1 - Übung 0" class=md-nav__link> Übungsblatt 1 - Übung 0 </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Inhaltsverzeichnis> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </span> Inhaltsverzeichnis </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#verbindung-mit-dsn class=md-nav__link> Verbindung mit DSN </a> </li> <li class=md-nav__item> <a href=#exec-und-query class=md-nav__link> Exec und Query </a> </li> <li class=md-nav__item> <a href=#prepared-statements class=md-nav__link> Prepared Statements </a> </li> <li class=md-nav__item> <a href=#insert-statement class=md-nav__link> INSERT Statement </a> </li> <li class=md-nav__item> <a href=#update-statement class=md-nav__link> UPDATE Statement </a> </li> <li class=md-nav__item> <a href=#delete-statement class=md-nav__link> DELETE Statement </a> </li> <li class=md-nav__item> <a href=#create-statement class=md-nav__link> CREATE Statement </a> </li> <li class=md-nav__item> <a href=#details-zu-fetch class=md-nav__link> Details zu Fetch </a> <nav class=md-nav aria-label="Details zu Fetch"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zeilenweises-auslesen class=md-nav__link> Zeilenweises Auslesen </a> </li> <li class=md-nav__item> <a href=#fetch-ergebniszeile class=md-nav__link> Fetch Ergebniszeile </a> </li> <li class=md-nav__item> <a href=#beispiel-fetchobject class=md-nav__link> Beispiel fetchObject </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#weitere-ressourcen class=md-nav__link> Weitere Ressourcen </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/stefanhuber/Serverseitige-Softwareentwicklung/php/08.md title="Seite editieren" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"/></svg> </a> <h1 id=arbeiten-mit-datenbanken>Arbeiten mit Datenbanken</h1> <p>PHP Data Objects (PDO) ist eine Datenbankabstraktionsschicht, welche einen einheitlichen Zugriff auf unterschiedliche DBMS über eine Schnittstelle ermöglicht. Somit kann zB zur Entwicklungszeit SQLite verwendet werden und in der Produktivumgebung auf Oracle gesetzt werden. PDO bietet folgende Vorteile:</p> <ul> <li>Sicherheit: Escaping von Queryparameter über Prepared Statements</li> <li>Usability: Viele nützliche Funktionen um einen unproblematischen Zugriff auf das DBMS zu realisieren</li> <li>Wiederverwendbarkeit: Einheitliche API für den Zugriff auf unterschiedliche DBMS</li> </ul> <p>Für die Arbeit mit PDO werden generell 2 Klassen benötigt. Die Klasse <code>PDO</code> als Einstiegspunkt und die Klasse <code>PDOStatement</code>, welche einzelne SQL-Statements repräsentiert.</p> <h2 id=verbindung-mit-dsn>Verbindung mit DSN</h2> <p>Um die Verbindung zu einem DBMS aufzubauen wird ein gültiger Data Source Name (DSN) benötigt. DSNs sind generell nach einem einfachen Schema aufgebaut. Dannach folgen unterschiedliche Verbindungsparameter als Schlüssel/Wert Paare mit <code>;</code> getrennt.</p> <p>Als wichtige Verbindungsparameter sind dabei <code>host</code>, <code>dbname</code>, <code>port</code> und <code>charset</code> zu nennen. Im folgenden findet sich ein Beispiel eines DSN für eine Mysql-Datenbank mit dem Namen <code>test</code> auf Port <code>3306</code> und einem <code>utf-8</code> Charset:</p> <div class=codehilite><pre><span></span><code>mysql:host=localhost;dbname=test;port=3306;charset=utf-8
</code></pre></div> <p>Mit der Klasse <code>PDO</code> kann die tatsächliche Verbindung zu einem DBMS über den DSN aufgebaut werden. Je nach verwendetem DBMS sind ein gültiger Username bzw. Passwort wichtige Ergänzungen zum DSN. Im Folgenden Code-Abschnitt wird die Verbindung zu einer Mysql-Datenbank aufgebaut: </p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=nv>$dsn</span> <span class=o>=</span> <span class=s2>&quot;mysql:host=localhost;dbname=test;port=3306;charset=utf-8&quot;</span><span class=p>;</span>
<span class=nv>$username</span> <span class=o>=</span> <span class=s2>&quot;root&quot;</span><span class=p>;</span>
<span class=nv>$password</span> <span class=o>=</span> <span class=s2>&quot;geheim&quot;</span><span class=p>;</span>

<span class=k>try</span> <span class=p>{</span>
    <span class=nv>$pdo</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>PDO</span><span class=p>(</span><span class=nv>$dsn</span><span class=p>,</span> <span class=nv>$username</span><span class=p>,</span> <span class=nv>$password</span><span class=p>);</span>
<span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>Exception</span> <span class=nv>$e</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>echo</span> <span class=s2>&quot;ERROR: &quot;</span> <span class=o>.</span> <span class=nv>$e</span><span class=o>-&gt;</span><span class=na>getMessage</span><span class=p>();</span>
<span class=p>}</span>
</code></pre></div> <p>Die oben erzeugte Variable <code>$pdo</code> wird in den weiteren Quellcode-Abschnitten dieses Textes wiederverwendet. </p> <h2 id=exec-und-query>Exec und Query</h2> <p>Die Klasse <code>PDO</code> bietet zwei generische Methoden (<code>exec</code> und <code>query</code>) um mit einer Datenbank zu arbeiten.</p> <p>Die Methode <code>exec</code> kann genutzt werden um ein SQL-Statement auszuführen. Als Ergebnis liefert die Methode "nur" die Anzahl der Zeilen, welche durch das SQL-Statement betroffen worden sind. Im folgenden Beispiel wird ein DELETE-Statement mit <code>exec</code> ausgeführt. Als Ergebnis wird die Anzahl der gelöschten Zeilen an die Variable <code>$count</code> zurückgegeben:</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$count</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>exec</span><span class=p>(</span><span class=s2>&quot;DELETE FROM products WHERE price &gt; 10&quot;</span><span class=p>);</span>
</code></pre></div> <p>Die Methode <code>query</code> erzeugt eine Instanz der Klasse <code>PDOStatement</code>. Ein <code>PDOStatement</code> stellt unter anderem eine Ergebnismenge dar und kann iteriert werden:</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$sql</span> <span class=o>=</span> <span class=s2>&quot;SELECT * FROM products ORDER BY price&quot;</span><span class=p>;</span>
<span class=k>foreach</span> <span class=p>(</span><span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>query</span><span class=p>(</span><span class=nv>$sql</span><span class=p>)</span> <span class=k>as</span> <span class=nv>$row</span><span class=p>)</span> <span class=p>{</span>
    <span class=k>echo</span> <span class=nv>$row</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=o>.</span> <span class=s2>&quot; &quot;</span> <span class=o>.</span> <span class=nv>$row</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>.</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Die Methoden <code>exec</code> und <code>query</code> sollten nur für statische SQL-Statements verwendet werden. Variable Parameter werden nicht escaped und sind daher offen für SQL-Injections.</p> </div> <h2 id=prepared-statements>Prepared Statements</h2> <p>SQL-Queries benötigen häufig Parameter aus dem PHP-Programm. Unter anderem aus Sicherheitsgründen sollten dazu Prepared Statements genutzt werden.</p> <p>Im Beispiel sollen alle Attribute eines Produktes anhand der ID des Produktes abgefragt werden. Die ID des Produktes könnte zB über den Querystring der URI an das PHP Programm übergeben werden.</p> <p>Die Variable <code>$pdo</code> stellt eine gültige Datenbankverbindung dar (siehe oben). Folgende Schritte werden im Skript durchgeführt:</p> <ul> <li>Es wird ein Prepared Statement erzeugt (Methode <code>prepare</code>). Mit <code>?</code> werden Platzhalter für variable Bestandteile der SQL-Query definiert.</li> <li>Das erzeugte Prepared Statement kann über die Methode <code>execute</code> ausgeführt werden. Dabei wird ein Array übergeben, dass alle definierten Platzhalter der Reihe nach ersetzt. Alle übergebenen Werte werden escaped, sodass es zu keiner SQL-Injection kommen kann.</li> <li>Die Methode <code>fetch</code> kann genutzt werden um das Query-Resultat zeilenweise abzufragen. <code>fetch</code> gibt <code>false</code> zurück, falls das Ergebnis leer ist.</li> </ul> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=nv>$statement</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s1>&#39;SELECT * FROM products WHERE id = ?&#39;</span><span class=p>);</span>

<span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>([</span><span class=nv>$_GET</span><span class=p>[</span><span class=s1>&#39;id&#39;</span><span class=p>]]);</span>

<span class=nv>$product</span> <span class=o>=</span> <span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>fetch</span><span class=p>();</span>
</code></pre></div> <h2 id=insert-statement>INSERT Statement</h2> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$statement</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s2>&quot;INSERT INTO products (name, description, price) VALUES (?, ?, ?)&quot;</span><span class=p>);</span>
<span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>([</span><span class=s2>&quot;Tolles Produkt&quot;</span><span class=p>,</span> <span class=s2>&quot;Ein schönes Produkt mit vielen Extras...&quot;</span><span class=p>,</span> <span class=mf>5.99</span><span class=p>]);</span>
</code></pre></div> <h2 id=update-statement>UPDATE Statement</h2> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$statement</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s2>&quot;UPDATE products SET name = ? WHERE id = ?&quot;</span><span class=p>);</span>
<span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>([</span><span class=s2>&quot;Neuer Produktname&quot;</span><span class=p>,</span> <span class=mi>13</span><span class=p>]);</span>
</code></pre></div> <h2 id=delete-statement>DELETE Statement</h2> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>
<span class=nv>$statement</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s2>&quot;DELETE FROM products WHERE id = ?&quot;</span><span class=p>);</span>
<span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>([</span><span class=mi>13</span><span class=p>]);</span>
</code></pre></div> <h2 id=create-statement>CREATE Statement</h2> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=nv>$create</span> <span class=o>=</span> <span class=s2>&quot;CREATE TABLE IF NOT EXISTS products (</span>
<span class=s2>    id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class=s2>    name TEXT NOT NULL,</span>
<span class=s2>    description TEXT NOT NULL,</span>
<span class=s2>    image TEXT NOT NULL,</span>
<span class=s2>    price REAL</span>
<span class=s2>)&quot;</span><span class=p>;</span>

<span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>exec</span><span class=p>(</span><span class=nv>$create</span><span class=p>);</span>
</code></pre></div> <h2 id=details-zu-fetch>Details zu Fetch</h2> <h3 id=zeilenweises-auslesen>Zeilenweises Auslesen</h3> <p>Die Methode <code>fetch</code> liefert immer nur eine Ergebniszeile je Aufruf. Die Methode fungiert dabei wie ein Cursor und springt die Ergebnismenge zeilenweise durch. Mit einer Schleife kann somit durch die Ergebnismenge iteriert werden. Falls die Ergenbismenge leer ist oder der Cursor am Ende angekommen ist, liefert die Methode <code>fetch</code> <code>false</code> als Rückgabewert.</p> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=nv>$stmt</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s1>&#39;SELECT name, price FROM products&#39;</span><span class=p>);</span>
<span class=nv>$stmt</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>

<span class=k>while</span> <span class=p>(</span><span class=nv>$product</span> <span class=o>=</span> <span class=nv>$stmt</span><span class=o>-&gt;</span><span class=na>fetch</span><span class=p>())</span>
<span class=p>{</span>
    <span class=k>echo</span> <span class=nv>$product</span><span class=p>[</span><span class=s1>&#39;name&#39;</span><span class=p>]</span> <span class=o>.</span> <span class=s2>&quot;: € &quot;</span> <span class=o>.</span> <span class=nv>$product</span><span class=p>[</span><span class=s1>&#39;price&#39;</span><span class=p>]</span> <span class=o>.</span> <span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <h3 id=fetch-ergebniszeile>Fetch Ergebniszeile</h3> <p>Die Repräsentation einer Ergebniszeile kann über den sog. <code>Fetch-Style</code> angepasst werden. PDO bietet 11 verschiedene Fetch-Styles. Die wichtigsten sollen kurz zusammengefasst werden:</p> <ul> <li><code>FETCH_ASSOC</code>: Das Ergebnis wird als assoziatives Array repräsentiert.</li> <li><code>FETCH_NUM</code>: Das Ergebnis wird als indexiertes Array repräsentiert.</li> <li><code>FETCH_BOTH</code>: Dies ist die default Einstellung. Eine Kombination aus <code>FETCH_ASSOC</code> und <code>FETCH_NUM</code>.</li> <li><code>FETCH_OBJ</code>: Das Ergebnis wird als "anonymes" Objekt (der Klasse <code>stdClass</code>) repräsentiert. Die Spalten werden auf Objekteigenschaften gemappt.</li> <li><code>FETCH_LAZY</code>: Ähnlich zu <code>FETCH_OBJ</code>, die Attribute des Objektes werden jedoch erst zugewiesen, wenn sie abgefragt werden.</li> <li><code>FETCH_CLASS</code>: Das Ergebnis wird innerhalb eines Objektes der entsprechenden Klasse repräsentiert.</li> </ul> <p>Die Methode <code>fetchObject</code> kann komfortabel anstelle der Angabe des <code>FETCH_OBJ</code> oder <code>FETCH_CLASS</code> Style verwendet werden.</p> <h3 id=beispiel-fetchobject>Beispiel fetchObject</h3> <div class=codehilite><pre><span></span><code><span class=cp>&lt;?php</span>

<span class=k>class</span> <span class=nc>Product</span>
<span class=p>{</span>
    <span class=k>protected</span> <span class=nv>$id</span><span class=p>;</span>
    <span class=k>protected</span> <span class=nv>$name</span><span class=p>;</span>
    <span class=k>protected</span> <span class=nv>$price</span><span class=p>;</span>

    <span class=c1>// ... getter/setter</span>
<span class=p>}</span>

<span class=nv>$statement</span> <span class=o>=</span> <span class=nv>$pdo</span><span class=o>-&gt;</span><span class=na>prepare</span><span class=p>(</span><span class=s2>&quot;SELECT id, name, price FROM products&quot;</span><span class=p>);</span>
<span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>execute</span><span class=p>();</span>

<span class=c1>// $product ist eine Instanz der Klasse Product:</span>
<span class=nv>$product</span> <span class=o>=</span> <span class=nv>$statement</span><span class=o>-&gt;</span><span class=na>fetchObject</span><span class=p>(</span><span class=nx>Product</span><span class=o>::</span><span class=na>class</span><span class=p>);</span>
</code></pre></div> <h2 id=weitere-ressourcen>Weitere Ressourcen</h2> <ul> <li>Die PHP-Dokumentation bietet zu <a href=https://www.php.net/manual/en/book.pdo.php>PDO</a> und allen Klassen und Methoden eine ausführliche Beschreibung.</li> <li>Die Website <a href=https://phpdelusions.net/ >phpdelusions.net</a> bietet ein umfangreiches <a href=https://phpdelusions.net/pdo>Tutorial zu PDO</a>.</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label> <a href=../07/ title="Errors und Exceptions" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z /></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Zurück </span> Errors und Exceptions </div> </div> </a> <a href=../09/ title="Quellcode einbinden" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Weiter </span> Quellcode einbinden </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d=M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z /></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> CC-BY-SA / Stefan Huber </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.c51dfa35.min.js></script> <script src=../../assets/javascripts/bundle.eaaa3931.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "In Zwischenablage kopieren", "clipboard.copied": "In Zwischenablage kopiert", "search.config.lang": "de", "search.config.pipeline": "", "search.config.separator": "", "search.result.placeholder": "Suchbegriff eingeben", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>